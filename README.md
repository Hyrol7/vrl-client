# VRL Client

–õ–æ–∫–∞–ª—å–Ω–∏–π –∫–ª—ñ—î–Ω—Ç –¥–ª—è —Å–±–æ—Ä—É —Ç–∞ –æ–±—Ä–æ–±–∫–∏ —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—ó –≤—ñ–¥ Mode S/FLARM –¥–µ–∫–æ–¥–µ—Ä–∞ –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—é –≤—ñ–¥–ø—Ä–∞–≤–∫–æ—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

## üìã –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

- ‚úÖ **TCP –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –¥–µ–∫–æ–¥–µ—Ä–∞** –Ω–∞ –ø–æ—Ä—Ç—É 31003
- ‚úÖ **–ü–∞—Ä—Å–∏–Ω–≥ AVR —Ñ–æ—Ä–º–∞—Ç—É** (K1/K2 –ø–∞–∫–µ—Ç–∏) –∑ —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è–º –ø–æ–∑–∏–≤–Ω–∏—Ö —Ç–∞ –≤–∏—Å–æ—Ç–∏
- ‚úÖ **–õ–æ–∫–∞–ª—å–Ω–∞ SQLite –ë–î** –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Å–∏—Ä–∏—Ö —Ç–∞ –æ–±—Ä–æ–±–ª–µ–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- ‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è —á–∞—Å—É** –∑ NTP —Å–µ—Ä–≤–µ—Ä–æ–º (–∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å—É)
- ‚úÖ **–ü–µ—Ä–∏–æ–¥–∏—á–Ω–∏–π ping** –Ω–∞ API —Å–µ—Ä–≤–µ—Ä –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∑–±—ñ—Ä–∫–∞ –≤ exe** —á–µ—Ä–µ–∑ GitHub Actions
- ‚úÖ **–ì–Ω—É—á–∫–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è** —á–µ—Ä–µ–∑ YAML

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –í–∞—Ä—ñ–∞–Ω—Ç A: –ì–æ—Ç–æ–≤–∏–π EXE (–Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π)

1. –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—é –≤–µ—Ä—Å—ñ—é `VRL_Client.exe` –∑ [Releases](../../releases)
2. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Ñ–∞–π–ª –Ω–∞ Windows –∫–æ–º–ø'—é—Ç–µ—Ä—ñ
3. –ü—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É –±—É–¥–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ `config.yaml`
4. –í—ñ–¥—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥ (–¥–æ–¥–∞—Ç–∏ —à–ª—è—Ö –¥–æ –¥–µ–∫–æ–¥–µ—Ä–∞, API –ø–∞—Ä–∞–º–µ—Ç—Ä–∏)
5. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∑–Ω–æ–≤—É - –≤—Å—ñ –≥–æ—Ç–æ–≤–æ!

### –í–∞—Ä—ñ–∞–Ω—Ç B: –ó –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ –∫–æ–¥—É (–≥–Ω—É—á–∫—ñ—à–∏–π)

**–í–∏–º–æ–≥–∏:**
- Python 3.8+
- Git

**–ö—Ä–æ–∫–∏:**

```bash
# 1. –ö–ª–æ–Ω—É–≤–∞—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
git clone https://github.com/yourusername/vrl-client.git
cd vrl-client

# 2. –°—Ç–≤–æ—Ä–∏—Ç–∏ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ –æ—Ç–æ—á–µ–Ω–Ω—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è)
python -m venv venv
source venv/bin/activate  # Linux/macOS
# –∞–±–æ
venv\Scripts\activate     # Windows

# 3. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
pip install -r vrl_client/requirements.txt

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç–∏
python vrl_client/vrl.py
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

–ü—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è `config.yaml` –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º.

**–û—Å–Ω–æ–≤–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏:**

```yaml
decoder:
  executable: 'C:\path\to\uvd_rtl.exe'  # –®–ª—è—Ö –¥–æ –¥–µ–∫–æ–¥–µ—Ä–∞
  host: '127.0.0.1'
  port: 31003
  
api:
  url: 'https://your-api.com/ingest.php'
  status_url: 'https://your-api.com/status.php'
  client_id: 1
  secret_key: 'your-secret-key'
  bearer_token: 'your-bearer-token'
  ping_interval: 30  # –°–µ–∫—É–Ω–¥–∏
  
app:
  timezone: 'Europe/Kiev'  # –í–∞—à —á–∞—Å–æ–≤–∏–π –ø–æ—è—Å
```

## üìä –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

–õ–æ–∫–∞–ª—å–Ω–∞ SQLite –ë–î (base.db) –º—ñ—Å—Ç–∏—Ç—å:

- **packets_raw**: —Å–∏—Ä—ñ –ø–∞–∫–µ—Ç–∏ –≤—ñ–¥ –¥–µ–∫–æ–¥–µ—Ä–∞
  - `id`, `event_time`, `type` (1=K1, 2=K2)
  - `callsign`, `height`, `fuel`
  - `sent` (—Ñ–ª–∞–≥ –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä)

- **logs**: –∂—É—Ä–Ω–∞–ª –ø–æ–¥—ñ–π —Å–∏—Å—Ç–µ–º–∏
  - `level`, `component`, `message`, `details`

## üîÑ –û–Ω–æ–≤–ª–µ–Ω–Ω—è

### –Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ EXE:

–ü—Ä–æ—Å—Ç–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –Ω–æ–≤—É –≤–µ—Ä—Å—ñ—é –∑ Releases —Ç–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–∏.

### –Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –∑ –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ –∫–æ–¥—É:

```bash
git pull origin main
```

## üõ†Ô∏è –†–æ–∑—Ä–æ–±–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞ –∑–±—ñ—Ä–∫–∞ EXE

```bash
cd vrl_client
pip install pyinstaller
python build_exe.py
```

–†–µ–∑—É–ª—å—Ç–∞—Ç: `vrl_client/dist/VRL_Client.exe`

### Release –Ω–∞ GitHub

–î–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ—ó –≤–µ—Ä—Å—ñ—ó:

```bash
git tag v1.0.1
git push origin v1.0.1
```

GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
1. –ó–±–µ—Ä–µ exe —Ñ–∞–π–ª
2. –°—Ç–≤–æ—Ä–∏—Ç—å Release
3. –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç—å exe —è–∫ artifact

## üìã –ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó

```
0. –ï–¢–ê–ü 0: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
   ‚Üì
1. –ï–¢–ê–ü 1: –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è —á–∞—Å—É –∑ NTP
   ‚Üì
2. –ï–¢–ê–ü 2: –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
   ‚Üì
3. –ï–¢–ê–ü 3: –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ë–î
   ‚Üì
4. –ï–¢–ê–ü 4: –ó–∞–ø—É—Å–∫ –¥–µ–∫–æ–¥–µ—Ä–∞
   ‚Üì
5. –ï–¢–ê–ü 5: –û—á—ñ–∫—É–≤–∞–Ω–Ω—è TCP –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
   ‚Üì
6. –ï–¢–ê–ü 6: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –º–æ–¥—É–ª—ñ–≤
   ‚Üì
7. –ï–¢–ê–ü 7: –ó–∞–ø—É—Å–∫ –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ–≥–æ ping –Ω–∞ API
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
vrl-client/
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ workflows/
‚îÇ       ‚îî‚îÄ‚îÄ build.yml              # GitHub Actions –¥–ª—è –∑–±—ñ—Ä–∫–∏
‚îú‚îÄ‚îÄ vrl_client/
‚îÇ   ‚îú‚îÄ‚îÄ vrl.py                     # –û—Å–Ω–æ–≤–Ω–∏–π —Ñ–∞–π–ª
‚îÇ   ‚îú‚îÄ‚îÄ parser.py                  # TCP –ø–∞—Ä—Å–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ analyser.py                # –û–±—Ä–æ–±–Ω–∏–∫ –¥–∞–Ω–∏—Ö
‚îÇ   ‚îú‚îÄ‚îÄ sender.py                  # –í—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫ –Ω–∞ API
‚îÇ   ‚îú‚îÄ‚îÄ build_exe.py               # –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–±—ñ—Ä–∫–∏ exe
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt           # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ Python
‚îÇ   ‚îú‚îÄ‚îÄ config.yaml                # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è)
‚îÇ   ‚îî‚îÄ‚îÄ base.db                    # SQLite –±–∞–∑–∞ (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è)
‚îú‚îÄ‚îÄ .gitignore
‚îî‚îÄ‚îÄ README.md
```

## üîê –ë–µ–∑–ø–µ–∫–∞

- HMAC SHA256 —Å–∏–≥–Ω–∞—Ç—É—Ä–∏ –¥–ª—è –≤—Å—ñ—Ö –∑–∞–ø–∏—Ç—ñ–≤ –Ω–∞ API
- Bearer token –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
- –ö–æ–Ω—Ñ—ñ–≥ —Ñ–∞–π–ª .gitignored (–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –Ω–∞ GitHub)

## üìù –õ–æ–≥—É–≤–∞–Ω–Ω—è

–í—Å–µ –ª–æ–≥—É—î—Ç—å—Å—è –≤ –ë–î —Ç–∞–±–ª–∏—Ü—é `logs`:
- **INFO**: –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- **WARNING**: –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è
- **ERROR**: –ü–æ–º–∏–ª–∫–∏

–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏:
```bash
sqlite3 vrl_client/base.db "SELECT * FROM logs ORDER BY created_at DESC LIMIT 20;"
```

## üêõ Troubleshooting

### –î–µ–∫–æ–¥–µ—Ä –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∏–π
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —à–ª—è—Ö –¥–æ `uvd_rtl.exe` –≤ `config.yaml`
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ —Ñ–∞–π–ª —ñ—Å–Ω—É—î —Ç–∞ –≤–∏–∫–æ–Ω—É–≤–∞–Ω–∏–π

### TCP –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –¥–µ–∫–æ–¥–µ—Ä –∑–∞–ø—É—â–µ–Ω–∏–π
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ IP –∞–¥—Ä–µ—Å—É —Ç–∞ –ø–æ—Ä—Ç (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 127.0.0.1:31003)
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ `decoder.host` —Ç–∞ `decoder.port` –≤ –∫–æ–Ω—Ñ—ñ–≥—É

### –ß–∞—Å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –Ω–µ –≤–¥–∞–ª–∞—Å—è
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç –∑'—î–¥–Ω–∞–Ω–Ω—è
- –ù–∞ Windows –ø–æ—Ç—Ä–µ–±—É—î –ø—Ä–∞–≤ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è w32tm

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–°—Ç–≤–æ—Ä–∏—Ç–∏ issue –Ω–∞ GitHub –¥–ª—è –±–∞–≥—Ä–∞–ø–æ—Ä—Ç—ñ–≤ —Ç–∞ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π.

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT License

---

**–í–µ—Ä—Å—ñ—è:** 1.0.0  
**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** –õ–∏—Å—Ç–æ–ø–∞–¥ 2025
